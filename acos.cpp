// #include <iostream>
// #include <iomanip>
// #include <cmath>

#define ACOS_STEPS	256
static float acos_lut[ACOS_STEPS] = {
	3.141593, 3.016511, 2.964585, 2.924661, 2.890937, 2.861166, 2.834198, 2.809348,
	2.786171, 2.764360, 2.743688, 2.723987, 2.705124, 2.686994, 2.669514, 2.652613,
	2.636232, 2.620323, 2.604842, 2.589755, 2.575028, 2.560635, 2.546551, 2.532753,
	2.519224, 2.505945, 2.492901, 2.480078, 2.467462, 2.455043, 2.442809, 2.430750,
	2.418858, 2.407125, 2.395542, 2.384102, 2.372799, 2.361627, 2.350579, 2.339651,
	2.328837, 2.318133, 2.307534, 2.297035, 2.286634, 2.276326, 2.266108, 2.255976,
	2.245928, 2.235960, 2.226068, 2.216252, 2.206508, 2.196833, 2.187225, 2.177683,
	2.168203, 2.158784, 2.149423, 2.140120, 2.130872, 2.121677, 2.112533, 2.103440,
	2.094395, 2.085397, 2.076445, 2.067537, 2.058671, 2.049848, 2.041064, 2.032320,
	2.023613, 2.014943, 2.006309, 1.997709, 1.989143, 1.980609, 1.972107, 1.963635,
	1.955193, 1.946780, 1.938394, 1.930036, 1.921704, 1.913397, 1.905114, 1.896856,
	1.888620, 1.880407, 1.872215, 1.864044, 1.855893, 1.847761, 1.839648, 1.831554,
	1.823477, 1.815416, 1.807372, 1.799343, 1.791330, 1.783330, 1.775345, 1.767372,
	1.759413, 1.751465, 1.743529, 1.735604, 1.727689, 1.719784, 1.711889, 1.704002,
	1.696124, 1.688254, 1.680391, 1.672534, 1.664684, 1.656840, 1.649001, 1.641167,
	1.633337, 1.625511, 1.617689, 1.609869, 1.602051, 1.594236, 1.586422, 1.578609,
	1.570796, 1.562984, 1.555171, 1.547357, 1.539541, 1.531724, 1.523904, 1.516082,
	1.508256, 1.500426, 1.492592, 1.484753, 1.476908, 1.469058, 1.461202, 1.453339,
	1.445469, 1.437590, 1.429704, 1.421808, 1.413903, 1.405989, 1.398064, 1.390128,
	1.382180, 1.374220, 1.366248, 1.358262, 1.350263, 1.342249, 1.334221, 1.326177,
	1.318116, 1.310039, 1.301944, 1.293831, 1.285700, 1.277549, 1.269378, 1.261186,
	1.252973, 1.244737, 1.236478, 1.228196, 1.219889, 1.211557, 1.203198, 1.194813,
	1.186400, 1.177958, 1.169486, 1.160984, 1.152450, 1.143884, 1.135284, 1.126650,
	1.117980, 1.109273, 1.100529, 1.091745, 1.082921, 1.074056, 1.065148, 1.056195,
	1.047198, 1.038153, 1.029059, 1.019916, 1.010721, 1.001473, 0.992169, 0.982809,
	0.973390, 0.963910, 0.954367, 0.944760, 0.935085, 0.925341, 0.915524, 0.905633,
	0.895665, 0.885616, 0.875484, 0.865266, 0.854958, 0.844557, 0.834059, 0.823460,
	0.812756, 0.801942, 0.791014, 0.779966, 0.768794, 0.757491, 0.746051, 0.734468,
	0.722734, 0.710842, 0.698784, 0.686550, 0.674130, 0.661515, 0.648692, 0.635647,
	0.622369, 0.608839, 0.595042, 0.580958, 0.566564, 0.551838, 0.536750, 0.521270,
	0.505360, 0.488980, 0.472079, 0.454598, 0.436469, 0.417606, 0.397904, 0.377233,
	0.355421, 0.332245, 0.307395, 0.280426, 0.250656, 0.216931, 0.177008, 0.125082
};

float fastAcos(float in)
{
	// calculate index
	in = in * 128 + 128;
	unsigned int idx = (unsigned int) in;

	return acos_lut[idx];
}

// void generateLut(void)
// {
	// std::cout << std::fixed << std::setprecision(6);
	// float step = 2.0 / ACOS_STEPS;
	// for (int i = 0; i < ACOS_STEPS; ++i) {
		// float rat = -1.0 + i * step;
		// float angle = std::acos(rat);
// //		std::cout << "LUT entry " << i << ": ";
// //		std::cout << std::fixed << std::setprecision(3) << rat;
// //		std::cout << " | " << std::setprecision(6) << angle << std::endl;
		// std::cout << angle;
		// if ((i & 7) == 7)
			// std::cout << "," << std::endl;
		// else
			// std::cout << ", ";
	// }
// }

// int main(int argc, char *argv[])
// {
	// float step = 1.0 / ACOS_STEPS;
	// for (unsigned int i = 0; i < (2 * ACOS_STEPS); ++i) {
		// float rat = -1.0 + i * step;
		// float angle = fastAcos(rat);
		
		// std::cout << angle;
		// if ((i & 7) == 7)
			// std::cout << "," << std::endl;
		// else
			// std::cout << ", ";
	// }

	// return 0;
// }
